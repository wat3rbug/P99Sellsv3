#P99Sellsv3  An application to notify user of characters online that wish to tarde items.

<h2>Purpose</h2>h2>  P99Sells – Honest analysis of an overcomplicated simple application

 
<p>One day while playing Project 1999, a simulator to play Everquest like it was back in 1999, I came to the realization that I could automate or monitor one of my least favorite activities in Project 1999.  It is trading goods in the East Commons tunnel.  You see, when I play a game, one thing I don’t like to do is sit around for hours waiting for the opportunity to buy or sell an item to an interested party.  I don’t like doing that in real life, and even less in a game.  I understand that trading, along with other social interactions are what made Project 1999 so great.  The developers of the game frown on all kinds of hacks and programs to make the game easier, but they do allow you to at least look at the log files of the game, as long as you’re not using it to inject new information back to the game.  For example, I can’t use a program to take what items I do have and push them in the auction channel on the server.  How I would love to do it, so I can just remain offline and have stuff being sold and bought while I do other things I like better.  In fact they implemented the bazaar a few years later for just such activities.  So I made an application in Java so that I can monitor the EC tunnel and notify me remotely that a customer I want is now available to trade with me.</p>

<p>I actually made the application in 3 distinct phases.  The first phase is just as a command line application that would pop up displays saying that a particular customer wanted to buy or sale something I was interested in.  It used an XML file that had a list of items to sell.  So occasionally I would get ‘allverze wants to buy Sheer Bone Mask’.  Then I could move over to that PC, send allverze a tell where I am located and we would negotiate a price and /or buy or sell the item.  This was a good idea but it lacked something.  During the day if I was working from home, I wasn’t looking at this machine for obvious reasons.  I made another rather simple Java application that would listen for broadcasts from the network for the announcements that ‘allverze wants to buy Sheer Bone Mask’.  The idea also worked well in theory.  It has one issue.  If I am actively using the computer on some other application, I don’t see the announcement, as it is not a notification banner.  Furthermore, what is needed is the knowledge to know where the log files for the game are stored and what they are called.</p>

<p>I decided to embark on the third phase and by far, the hardest.  I made the original application a graphical application.  I added a simple way to start parsing the logs regularly with simple suggestions.  You can just use the name of the character you want to use for logging.  You can verify the directory as you do this, but the default is where the game resides.  Next I expanded the XML file so that you can say for each item, whether you are buying or selling, how much, and which character is buying / selling it.  Since it is graphical I made a visual list of the items.  There is a checkbox next to each one so that when one is sold or bought, you can check it off the list.  I also provided a means for updating the XML file.  Because I added a graphical way to trade, I thought I would allow a way to filter it based on whether a character is in EC, regardless of whether it is online or not.  It works, sorta.  You see, the XML file generated by the program is crap.  It doesn’t have proper indentation and fixing it is a major hassle.  The entire thing saves into one. Big. Line.  The one fix I could find for it puts each item as a line but all of them are against the left boundary and there is no indentation, better, but not good.</p>

<p>The technical trouble with this application is where things get interesting.  I have two major issues.  The first is that the names of the characters, which are parsed from the XML file at the start, are stored in a separate data structure and are not linked to each other.  Since they aren’t linked, it is possible to have them out of sync.  You could conceivably disable ‘Lacki’ and have all the items he is trading, continue to trade.  You could also have ‘Lacki’ enabled and all his items no longer be traded and thereby, miss trading opportunities for him.  There are a number of small checks that can be done to minimize the issue, but that is one kind of issue that keeps me up at night.  The second one is the way that Java implements their GUI.  Now since the only GUI development I do is with Java, I may be slightly prejudiced but I’m not a real big fan.  It’s never stopped me from doing Java development, but there are certain aspects I do not bother doing.  Here is what I hoped to accomplish.  I had hoped that I could use a design pattern like ‘model view presenter’ or something similar.  The model is simple to implement.  I just have a factory that I read everything, or write everything and not worry about implementation details while doing it.  The view and the presenter are the nasty bits.  I tried separating them with an interface, but had no luck.  In hindsight, I should have made some kind of ‘façade’ so that the presenter could just push the data to the view and not worry about how it was going to be displayed to the view.  It’s not a bad application, but I am not proud of it.  I know that I can do better.  I think many design decisions for Java and its GUI, Swing, while being good at the time, could have been better.  I think that separating the names into a whole different data structure may have added more complexity than it saved.  I think that the week or so of development, was far longer than I wanted.  By comparison, the first and second phase took an hour a piece.</p>

<p>This brings me to final thoughts about that project.  The first one is that I need to write an Objective-C application on the Mac that listens for the broadcast and displays a banner.  This removes the idea of missing a chance at trading an item on Project 1999.  In theory, this should be simple, but it may not.  I started once, and found that I needed two copies of Notification Center so I could push a notification, and still no result. Since I do not work at home anymore, this project will likely be abandoned.  I have a robotic ambition to pursue at this time.</p>
